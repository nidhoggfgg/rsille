<div align="center">

# Rsille ğŸ¨

[![GitHub License](https://img.shields.io/github/license/nidhoggfgg/rsille?style=for-the-badge)](./LICENCE)
[![Crates.io Version](https://img.shields.io/crates/v/rsille?style=for-the-badge)](https://crates.io/crates/rsille/versions)
[![Crates.io Total Downloads](https://img.shields.io/crates/d/rsille?style=for-the-badge)](https://crates.io/crates/rsille)
[![docs.rs](https://img.shields.io/docsrs/rsille?style=for-the-badge)](https://docs.rs/rsille/latest/rsille/)

[English](./README.md) â€¢ [ä¸­æ–‡](./README_cn.md)

</div>


## ğŸ“š ç›®å½•

-------

* [å°è¯•ä¸€ä¸‹](#å°è¯•ä¸€ä¸‹)
* [å®‰è£…](#å®‰è£…)
* [ä½¿ç”¨æ–¹æ³•](#ä½¿ç”¨æ–¹æ³•)
    * [åŸºç¡€](#åŸºç¡€)
    * [Turtle](#turtle)
    * [3D object](#3d-object)
    * [ç”Ÿå‘½æ¸¸æˆ](#ç”Ÿå‘½æ¸¸æˆ)
    * [å›¾ç‰‡](#å›¾ç‰‡)
    * [åŠ¨ç”»](#åŠ¨ç”»)
* [TODO](#todo)
* [è®¸å¯](#ğŸ“-è®¸å¯)


## ğŸ‘€ å°è¯•ä¸€ä¸‹

æ‰€æœ‰ readme ä¸­ä½¿ç”¨çš„å›¾ç‰‡éƒ½å¯ä»¥åœ¨[`example`](./examples/)ï¼Œä¸­æ‰¾åˆ°æ— éœ€ç¼–ç¨‹ç›´æ¥è¿è¡Œï¼
```
git clone https://github.com/nidhoggfgg/rsille.git
cd rsille
cargo run --example cube
```
è¿™ä¼šäº§ç”Ÿä¸€ä¸ªæ—‹è½¬çš„æ­£æ–¹ä½“ã€‚
å…³äºæ›´å¤šä¾‹å­æˆ–è€…æƒ³è‡ªå·±å°è¯•ç”Ÿæˆé‚£äº›æœ‰è¶£çš„å›¾æ¡ˆï¼Œå¯ä»¥å°è¯•ä½¿ç”¨ `cargo run --example`ï¼Œä½ ä¼šæ‰¾åˆ°æ‰€æœ‰çš„å¯æ‰§è¡Œçš„ä¾‹å­è€Œæ— éœ€ç¼–ç¨‹ã€‚

## ğŸ”§ å®‰è£…

è¿™æ˜¯ä¸€ä¸ª rust åº“ï¼Œæ‰€ä»¥ä½ åªéœ€è¦å°†å¦‚ä¸‹ä»£ç æ·»åŠ åˆ°ä½ çš„ Cargo.toml ä¸­å³å¯ä½¿ç”¨

```toml
[dependencies]
rsille = "2.1.0"
```

## ğŸš€ä½¿ç”¨æ–¹æ³•

é™äºç¯‡å¹…ï¼Œæ­¤å¤„ç»™å‡ºçš„æ˜¯æ¯”è¾ƒå¸¸ç”¨çš„ api ä»¥åŠä¸€èˆ¬çš„ä½¿ç”¨æ–¹æ³•ã€‚
å…³äºè¯¦ç»†çš„ apiï¼Œå¯ä»¥å»å¾€ [doc.rs](https://docs.rs/rsille/latest/rsille/) æŸ¥çœ‹

### åŸºç¡€

æœ€åŸºç¡€çš„å°±æ˜¯ `set`
```rust
use rsille::Canvas;
fn main() {
    let mut c = Canvas::new();
    for x in -360..360 {
        let x = x as f64;
        c.set(x / 10.0, x.to_radians().sin() * 10.0);
    }
    c.print();
}
```
![basic-sin](./imgs/basic-sin.png)

å…³äºä¸ºä»€ä¹ˆæ˜¯ *(x / 10.0, x.to_radians().sin() * 10.0)* è€Œä¸æ˜¯ *(x, x.sin())*ã€‚
è¿™ä¸€ç‚¹ä½ å¯ä»¥è‡ªå·±å°è¯•åŠ å‡ä¹˜é™¤æ¥æ›´æ”¹ç»˜åˆ¶çš„åæ ‡ï¼Œæœ‰ä¸€ä¸ªå°æç¤º `â ¿` åŒ…å« 8 ä¸ªç‚¹ã€‚
å¦‚æœä½ çœŸçš„ä¸ç†è§£æˆ–è€…æƒ³çŸ¥é“ä¸ºä»€ä¹ˆï¼Œå¯ä»¥æŸ¥çœ‹ [å†…éƒ¨è§£æ](#å†…éƒ¨è§£æ)ã€‚
ç¨åæˆ‘å¯èƒ½ä¼šå†™ä¸€éæ–‡ç« å…³äº braille codeã€‚

------

ä¸ `set` ç›¸åçš„æ˜¯ `unset`ï¼Œä½œç”¨å°±æ˜¯å°† `set` è¿‡çš„ç‚¹æ“¦ï¼Œè¿™é‡Œå°±ä¸ç»™å‡ºå…·ä½“çš„ä¾‹å­äº†ã€‚

------

è¿˜æœ‰ä¸€ä¸ªæœ‰ç”¨çš„æ–¹æ³•å°±æ˜¯ `toggle`ï¼Œå®ƒä¼šå°†å·²ç» `set` è¿‡çš„ç‚¹ `unset`ï¼Œè€Œ `set` æœª `set` çš„ç‚¹
```rust
use rsille::Canvas;
fn main() {
    let mut c = Canvas::new();
    for x in (0..360).step_by(4) {
        let x = x as f64;
        c.set(x / 4.0, x.to_radians().sin() * 30.0);
    }

    for x in 0..=30 {
        for y in 0..=30 {
            c.toggle(x, y);
            c.toggle(x + 30, y - 30);
            c.toggle(x + 60, y);
        }
    }
    c.print();
}
```
![toggle-sin](./imgs/toggle-sin.png)

è¿™ä¸ªä¾‹å­ç¨å¾®æœ‰ç‚¹é•¿ï¼Œå…ˆæ¥è§£é‡Šä¸€ä¸‹å…¶ä¸­çš„ä»£ç ã€‚
* `(0..360).step_by(4)` æ˜¯åœ¨ *[0, Ï€)* ä¸Šéå† *x*ï¼Œè€Œ `step_by(4)` æ˜¯ä¸ºäº†é™é‡‡æ ·ï¼Œä½¿çº¿æ¡æ›´ç»†ï¼ˆå¤ªä½ä¼šå¯¼è‡´ä¸ç²¾ç¡®ï¼‰
* ç¬¬ä¸€ä¸ª `for` å°±æ˜¯ä¸ºäº†ç”»å‡º *f(x) = sin(x)* çš„å›¾åƒï¼Œä¸ºäº†æ›´å¥½çœ‹ï¼Œè¿™é‡Œå¯¹ *x* å’Œ *y* æœ‰ä¸€å®šçš„ç¼©æ”¾
* ç¬¬äºŒä¸ª `for` ä¸­å°±æ˜¯ä¸ºäº†äº§ç”Ÿé‚£å‡ ä¸ª `toggle` å—ï¼Œå®ƒä»¬çš„å¤§å°éƒ½æ˜¯ 31x31

åœ¨ `toggle` ä¸­å¹¶æ²¡æœ‰ä½¿ç”¨æµ®ç‚¹æ•°ï¼Œè¿™æ˜¯å› ä¸ºæ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¯æœ‰æ³›å‹æ”¯æŒçš„ï¼Œå¯ä»¥ä¼ å…¥å„ç§æ•°å€¼ï¼
ä¸è¿‡ä»ç„¶å¼ºçƒˆå»ºè®®ä½¿ç”¨ `f64` æ¥å®ç°æ›´é«˜çš„ç²¾åº¦ã€‚

### Turtle

åœ¨ python ä¸­ï¼Œæœ‰ä¸ªå¾ˆæœ‰è¶£çš„åº“å°±æ˜¯ turtleã€‚
å®ƒå¯ä»¥ä½¿åˆæ¬¡ä½¿ç”¨ python çš„åˆå­¦è€…ä¹Ÿèƒ½ä½“ä¼šç¼–ç¨‹çš„ä¹è¶£ã€‚
åœ¨è¿™ä¸ªåº“ä¸­ä¹Ÿå®ç°äº† turtle ä¸­å¤§éƒ¨åˆ†çš„æ–¹æ³•ã€‚
```rust
use rsille::{extra::Turtle, Canvas};
fn main() {
    let mut canvas = Canvas::new();
    let mut t = Turtle::new();
    for _ in 0..5 {
        t.forward(50);
        t.right(144);
    }
    canvas.paint(&t, 0, 0).unwrap();
    canvas.print();
}
```
![turtle-star](./imgs/turtle-star.png)

`paint` æ–¹æ³•ä¸­çš„ä¸¤ä¸ª *0* å¹¶ä¸æ˜¯å›ºå®šçš„ï¼Œè€Œæ˜¯å°†ç›®æ ‡ç»˜åˆ¶åœ¨ *(0, 0)*ã€‚
è¿™æ˜¯ä»»æ„çš„ï¼Œä½†æ˜¯å¯¹äºå•ä¸ªç‰©ä½“ï¼Œæ€»æ˜¯ç»˜åˆ¶åœ¨ `(0, 0)` æ˜¯ä¸é”™çš„ã€‚

turtle å°±ä¸è¿‡å¤šä»‹ç»äº†ï¼Œå¯ä»¥ç›´æ¥ç²˜è´´ python çš„ä»£ç ç¨åŠ ä¿®æ”¹å³å¯ä½¿ç”¨ã€‚

### 3D Object

è¿™ä¸ªåº“ä¹Ÿå¯¹ä¸‰ç»´ç‰©ä½“æä¾›äº†æ”¯æŒï¼Œè¿˜æœ‰å†…éƒ¨æ–¹ä¾¿çš„ç›´æ¥æ„é€ ç‰©ä½“çš„æ–¹æ³•
```rust
use rsille::{extra::Object3D, Animation};

fn main() {
    let mut anime = Animation::new();
    let cube = Object3D::cube(30);
    anime.push(
        cube,
        |cube| {
            cube.rotate((1.0, 2.0, 3.0));
            false
        },
        (0, 0),
    );
    anime.run();
}
```
![cube](./imgs/cube.gif)

è¿™é‡Œä½¿ç”¨äº† `Animation` æ¥äº§ç”ŸåŠ¨ç”»ï¼Œè¿™ä¹Ÿæ˜¯å†…éƒ¨æ”¯æŒçš„ï¼Œå¯ä»¥ç‚¹å¼€ [åŠ¨ç”»](#åŠ¨ç”») æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯

`Object3D` ä¸»è¦æœ‰ä¸¤ä¸ªæœ‰ç”¨çš„æ–¹æ³•ï¼Œä¸€ä¸ªæ˜¯ `rotate` ç”¨äºæ—‹è½¬ç‰©ä½“ï¼Œå¦ä¸€ä¸ªåˆ™æ˜¯ `zoom` ç”¨äºç¼©æ”¾ç‰©ä½“ã€‚

### ç”Ÿå‘½æ¸¸æˆ

ç”Ÿå‘½æ¸¸æˆéå¸¸æœ‰æ„æ€ï¼Œæ‰€ä»¥ä¹Ÿä½œä¸ºäº†åº“çš„ä¸€éƒ¨åˆ†
```rust
use rsille::{extra::LifeGame, Animation};

fn main() {
    let mut anime = Animation::new();
    let lg = LifeGame::from(r#"
x = 47, y = 47, rule = B3/S23
18bo$18b3o$21bo$20b2o$$32b2o$32b2o$26bobo$28bo$$22b3o$15b2o5bo2bo$15b
2o5bo3bo$5b2o19bo$5b2o15bo3bo$22bo2bo8b2o$22b3o9b2o$$7b2o36b2o$45bo$7b
o4b3o28bobo$11bo3bo27b2o$10bo5bo13b3ob3o$10bo5bo13bo5bo$10b3ob3o13bo5b
o$2b2o27bo3bo$bobo28b3o4bo$bo$2o36b2o$$11b2o9b3o$11b2o8bo2bo$20bo3bo
15b2o$20bo19b2o$20bo3bo5b2o$21bo2bo5b2o$22b3o$$18bo$18bobo$13b2o$13b2o
$$25b2o$25bo$26b3o$28bo!
"#).unwrap();
    anime.push(
        lg,
        |lg| lg.update(),
        (0, 0),
    );
    anime.run();
}
```
![lifegame](./imgs/lifegame.gif)

è¿™é‡Œä»ç„¶æ˜¯ä½¿ç”¨ `Animation`ï¼ŒåŒæ—¶è§£æ lifegame çš„ `rle` æ–‡ä»¶ã€‚
åœ¨ `Lifegame` å†…éƒ¨å·²ç»ç¼–å†™äº†è§£æ `rle` æ–‡ä»¶æ‰€éœ€çš„ä¸€åˆ‡ï¼Œæ²¡æœ‰æ·»åŠ ä»»ä½•ä¾èµ–ï¼Œè€Œä¸”è§£æçš„ä»£ç æ˜¯éå¸¸è½»é‡åŒ–çš„ã€‚

### å›¾ç‰‡

ä½¿ç”¨ braille code æ¥ç»˜åˆ¶å›¾ç‰‡ä¹Ÿæ˜¯éå¸¸ä¸é”™çš„é€‰æ‹©ã€‚
ä½†æ˜¯ç”±äºè§£æå›¾ç‰‡ä½¿ç”¨çš„ `image` åº“æœ‰ç‚¹å¤§ï¼Œé»˜è®¤æ˜¯ä¸å¯ç”¨çš„ã€‚
æƒ³è¦ä½¿ç”¨åˆ™è¯·å°† Cargo.toml æ·»åŠ å¦‚ä¸‹å†…å®¹
```toml
[dependencies]
rsille = { version = "2.1.0", features = ["img"] }
```

è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨çš„æ¡ˆä¾‹ã€‚æ³¨æ„ï¼šè¯·å¡«ä¸Šå›¾ç‰‡çš„æ–‡ä»¶è·¯å¾„ï¼
```rust
use rsille::{extra::Imgille, Canvas};

fn main() {
    let mut canvas = Canvas::new();
    let img = Imgille::new("path/to/img").unwrap();
    canvas.paint(&img, 0, 0).unwrap();
    canvas.print();
}
```
![lena](./imgs/lena.png)
![xkcd](./imgs/xkcd.png)
![xkcd-invert](./imgs/xkcd-invert.png)

é»˜è®¤æ˜¯ä½¿ç”¨é¢œè‰²ï¼Œè€Œä½¿ç”¨é¢œè‰²çš„æƒ…å†µä¸‹å¯¹ç°åº¦å›¾æˆ–è€…é»‘ç™½å›¾(æ¯”å¦‚æ¥è‡ª xkcd)ç­‰éå¸¸ä¸å‹å¥½ï¼Œè¿˜ä¼šé™ä½æ¸…æ™°åº¦ï¼

æ‰€ä»¥å¯¹äºå®ƒä»¬å¯ä»¥ä¸€å®šè¦è°ƒç”¨ `color(false)` ï¼
åŒæ—¶è¿˜æ”¯æŒåè‰²ï¼Œæ¯”å¦‚ä¸Šæ–¹ä¸¤å¼  xckd çš„å›¾ç‰‡ï¼Œé»‘è‰²ä¸ºä¸»çš„æ˜¯æœªåè‰²çš„ï¼Œç™½è‰²ä¸ºä¸»çš„æ˜¯åè‰²çš„ï¼Œè°ƒç”¨ `invert(true)` å³å¯åè‰²ã€‚
è€Œå¯¹äºå½©è‰²å›¾ç‰‡ï¼Œä¸ä½¿ç”¨é¢œè‰²ä¸€æ ·æ˜¯ä¸é”™çš„é€‰æ‹©ï¼Œæ¯”å¦‚ï¼š

![lena-gray](./imgs/lena-gray.png)

å¦å¤–ï¼Œå›¾ç‰‡çš„å¤§å°ä¼šéšç€ç»ˆç«¯è‡ªåŠ¨ç¼©æ”¾ï¼Œæ— è®ºæ˜¯é•¿çš„ç»ˆç«¯è¿˜æ˜¯å®½çš„ç»ˆç«¯ï¼Œå®ƒæ€»æ˜¯èƒ½æ­£ç¡®åœ°ç¼©æ”¾è‡³åˆé€‚å¤§å°ï¼

### åŠ¨ç”»

ç”Ÿæˆä¸€äº›ç‰©ä½“ï¼Œç„¶åç»˜åˆ¶åˆ° `Canvas`ä¸Šï¼Œæ¥ç€æ›´æ–°ç‰©ä½“ï¼Œé‡æ–°ç»˜åˆ¶ã€‚
è¿˜è¦è®¾ç½®å¸§æ•°ï¼Œå¤„ç†ç”¨æˆ·è¾“å…¥ç­‰ã€‚
æ¯æ¬¡è‡ªå·±å†™ä»£ç åˆ©ç”¨åŸºç¡€çš„ `Canvas` ç»˜åˆ¶ä¸€ä¸ªåŠ¨ç”»éƒ½æ˜¯å¦‚æ­¤éº»çƒ¦ï¼
æ›´åˆ«æè¿˜æœ‰åˆé€‚åœ°æ“¦é™¤å±å¹•ä»¥åŠé˜²æ­¢é—ªçƒç­‰é—®é¢˜ã€‚

æ‰€ä»¥è¿™ä¸ªåº“å°†è¿™äº›éº»çƒ¦äº‹éƒ½åŒ…è£…äº†èµ·æ¥ï¼Œä½¿ç”¨å®ƒæ¥äº§ç”ŸåŠ¨ç”»åªéœ€è¦ 3 è¡Œä»£ç å³å¯ï¼

1. æ–°å»ºä¸€ä¸ªåŠ¨ç”» `let mut anime = Animation::new()`
2. è£…è½½ä¸€ä¸ªå¯ä»¥ç»˜åˆ¶çš„ç›®æ ‡ä»¥åŠæ›´æ–°å‡½æ•° `anime.push()`
3. è¿è¡Œ `anime.run()`

ç®€ç›´ç®€å•åˆ°äº†æç‚¹ï¼
```rust
use rsille::{extra::Object3D, Animation};

fn main() {
    let cube = Object3D::cube(30);
    let mut anime = Animation::new();
    anime.push(cube, |cube| { cube.rotate((1.0, 2.0, 3.0)); false }, (0, 0));
    anime.run();
}
```

`push` æ–¹æ³•çš„å‚æ•°å¦‚ä¸‹:
1. ç›®æ ‡ï¼Œç›´æ¥ä¼ å…¥å³å¯
2. é—­åŒ…ï¼Œä¸€ä¸ªè¿”å›å€¼ä¸º `bool` çš„æ›´æ–°å‡½æ•°ã€‚æ¯ä¸€å¸§éƒ½ä¼šè¿è¡Œä¸€æ¬¡è¯¥é—­åŒ…ï¼Œå½“é—­åŒ…è¿”å›å€¼ä¸º `true` æ—¶è¯¥ç›®æ ‡åœæ­¢æ›´æ–°ï¼Œä¹Ÿä¸ä¼šå†æ‰§è¡Œæ›´æ–°å‡½æ•°ï¼Œä½†ä»ç„¶ä¼šç»˜åˆ¶åœ¨ç”»å¸ƒä¸Šã€‚å½“æ‰€æœ‰çš„ç›®æ ‡éƒ½å·²ç»ç»“æŸæ›´æ–°ï¼ŒåŠ¨ç”»åœæ­¢ã€‚
3. *(x, y)*ï¼Œæ”¾ç½®ç›®æ ‡æ‰€åœ¨çš„ä½ç½®ï¼Œä¸€èˆ¬åªæœ‰å¤šä¸ªç›®æ ‡æ—¶ä½¿ç”¨

å¯¹äºç”¨æˆ·è¾“å…¥çš„å¤„ç†ï¼Œç›®å‰åªæœ‰ `ctrl+c` å’Œ `esc` é€€å‡ºï¼Œ
ä¹‹ååº”è¯¥ä¼šå¼€æ”¾è‡ªå®šä¹‰ã€‚

## ğŸ“Œ TODO

- [ ] ä¼˜åŒ– `Animation` ä¸­å¤šçº¿ç¨‹
- [ ] ä¸º `Animation` æ·»åŠ æ›´å¤šåŠŸèƒ½
- [ ] æ·»åŠ æ›´å¤šå¯ç»˜åˆ¶çš„å¯¹è±¡
- [ ] ä¸º `Lifegame` æ·»åŠ æœ‰è¾¹ç•Œçš„ç‰ˆæœ¬
- [ ] æ›´å¤šçš„ä¾‹å­

## ğŸ“ è®¸å¯

[MIT](./LICENCE)
